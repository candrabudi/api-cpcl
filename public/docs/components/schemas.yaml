Meta:
  type: object
  required:
    - timestamp
    - request_id
  properties:
    timestamp:
      type: string
      format: date-time
      example: "2025-01-01T10:00:00+07:00"
    request_id:
      type: string
      format: uuid
      example: "550e8400-e29b-41d4-a716-446655440000"

ValidationErrorItem:
  type: object
  required:
    - field
    - message
  properties:
    field:
      type: string
      example: login
    message:
      type: string
      example: The login field is required.

SuccessResponse:
  type: object
  required:
    - status
    - message
    - data
    - meta
  properties:
    status:
      type: boolean
      example: true
    message:
      type: string
      example: Success
    data:
      nullable: true
      description: Payload response
    meta:
      $ref: '#/Meta'

ValidationErrorResponse:
  type: object
  required:
    - status
    - message
    - errors
    - meta
  properties:
    status:
      type: boolean
      example: false
    message:
      type: string
      example: Validation failed
    errors:
      type: array
      items:
        $ref: '#/ValidationErrorItem'
    meta:
      $ref: '#/Meta'

ErrorResponse:
  type: object
  required:
    - status
    - message
    - meta
  properties:
    status:
      type: boolean
      example: false
    message:
      type: string
      example: Invalid credentials
    meta:
      $ref: '#/Meta'

UnauthenticatedError:
  type: object
  required:
    - status
    - message
    - meta
  properties:
    status:
      type: boolean
      example: false
    message:
      type: string
      example: Unauthenticated
    meta:
      $ref: '#/Meta'


# ===== AUTH-SPECIFIC DATA (HANYA DATA, BUKAN WRAPPER) =====

AuthUser:
  type: object
  properties:
    id:
      type: integer
      example: 1
    username:
      type: string
      example: johndoe
    email:
      type: string
      example: john@mail.com
    role:
      type: string
      example: admin

AuthLoginData:
  type: object
  properties:
    access_token:
      type: string
      example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
    token_type:
      type: string
      example: bearer
    expires_in:
      type: integer
      example: 3600
    user:
      $ref: '#/AuthUser'



PaginationLink:
  type: object
  properties:
    url:
      type: string
      nullable: true
    label:
      type: string
    active:
      type: boolean

GroupFieldListItem:
  type: object
  properties:
    id:
      type: integer
      example: 1
    title:
      type: string
      example: CPCL Nelayan
    prepared_by:
      type: string
      example: System
    total_rows:
      type: integer
      example: 25

GroupFieldPagination:
  type: object
  properties:
    current_page:
      type: integer
      example: 1
    data:
      type: array
      items:
        $ref: '#/GroupFieldListItem'
    first_page_url:
      type: string
      example: http://localhost:8000/api/group-fields?page=1
    from:
      type: integer
      nullable: true
    last_page:
      type: integer
      example: 5
    last_page_url:
      type: string
    links:
      type: array
      items:
        $ref: '#/PaginationLink'
    next_page_url:
      type: string
      nullable: true
    path:
      type: string
    per_page:
      type: integer
      example: 10
    prev_page_url:
      type: string
      nullable: true
    to:
      type: integer
      nullable: true
    total:
      type: integer
      example: 50

GroupFieldDocument:
  type: object
  properties:
    id:
      type: integer
      example: 1
    title:
      type: string
      example: CPCL Nelayan
    location:
      type: string
      nullable: true
      example: Pelabuhan
    document_date:
      type: string
      format: date
      example: "2025-01-01"
    prepared_by:
      type: string
      example: System

GroupFieldRow:
  type: object
  properties:
    id:
      type: integer
      example: 10
    label:
      type: string
      example: A. Data Nelayan
    row_type:
      type: string
      example: header
    value:
      nullable: true
    meta:
      nullable: true
    parent_id:
      type: integer
      nullable: true
    depth:
      type: integer
      example: 0
    children_count:
      type: integer
      example: 2
    children:
      type: array
      items:
        $ref: './schemas.yaml#/GroupFieldRow'

GroupFieldDetailData:
  type: object
  properties:
    document:
      $ref: './schemas.yaml#/GroupFieldDocument'
    rows:
      type: array
      items:
        $ref: './schemas.yaml#/GroupFieldRow'


GroupFieldRowInput:
  type: object
  required:
    - label
    - row_type
  properties:
    label:
      type: string
      example: A. Data Nelayan
    row_type:
      type: string
      example: header
    order_no:
      type: integer
      example: 0
    meta:
      nullable: true
    children:
      type: array
      items:
        $ref: './schemas.yaml#/GroupFieldRowInput'

GroupFieldCreateRequest:
  type: object
  required:
    - title
    - document_date
    - prepared_by
    - rows
  properties:
    title:
      type: string
      example: CPCL Nelayan
    location:
      type: string
      nullable: true
      example: Pelabuhan
    document_date:
      type: string
      format: date
      example: "2025-01-01"
    prepared_by:
      type: string
      example: System
    rows:
      type: array
      items:
        $ref: './schemas.yaml#/GroupFieldRowInput'

GroupFieldCreateResult:
  type: object
  properties:
    id:
      type: integer
      example: 123


GroupFieldRowValueUpdate:
  type: object
  required:
    - id
  properties:
    id:
      type: integer
      example: 10
    value:
      nullable: true
      example: 100

GroupFieldUpdateRequest:
  type: object
  required:
    - rows
  properties:
    rows:
      type: array
      items:
        $ref: './schemas.yaml#/GroupFieldRowValueUpdate'
